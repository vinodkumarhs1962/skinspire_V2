<!-- File: app/templates/engine/layouts/accordion_view.html -->
<div class="universal-accordion-view space-y-4">
    
    {% for tab in field_sections %}
        {% for section in tab.sections|sort(attribute='order') %}
            <div class="universal-accordion-section bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
                
                <!-- Accordion Header -->
                <div class="universal-accordion-header px-6 py-4 cursor-pointer border-b border-gray-200 dark:border-gray-700"
                     onclick="toggleAccordionSection('{{ section.key }}')">
                    <div class="flex items-center justify-between">
                        <h3 class="universal-section-title text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center">
                            <i class="{{ section.icon }} text-gray-500 mr-3"></i>
                            {{ section.title }}
                        </h3>
                        <i class="fas fa-chevron-down transform transition-transform" id="accordion-chevron-{{ section.key }}"></i>
                    </div>
                </div>
                
                <!-- Accordion Content -->
                <div class="universal-accordion-content p-6 {% if section.collapsed_by_default %}hidden{% endif %}" 
                     id="accordion-content-{{ section.key }}">
                    <div class="grid grid-cols-1 md:grid-cols-{{ section.columns }} gap-6">
                        {% for field in section.fields|sort(attribute='view_order') %}
                            <div class="universal-field-group {{ field.css_class }}">
                                <label class="universal-field-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                                    {{ field.label }}
                                </label>
                                <div class="universal-field-value text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-900 px-3 py-2 rounded border border-gray-300 dark:border-gray-600">
                                    {% if field.is_empty %}
                                        <span class="text-gray-400 italic">Not specified</span>
                                    {% else %}
                                        {{ field.value|safe }}
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                
            </div>
        {% endfor %}
    {% endfor %}
    
</div>