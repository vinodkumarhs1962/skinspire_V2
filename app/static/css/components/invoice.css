/* ==========================================
   INVOICE SPECIFIC STYLES
   File: static/css/components/invoice.css
   Only invoice-specific styles that don't conflict with components
   ========================================== */

/* ==========================================
   INVOICE LAYOUT COMPONENTS
   ========================================== */

/* Invoice container - specific layout */
.invoice-container {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 auto !important;
    background: white !important;
    padding: 1.5rem !important;
    border-radius: 0.5rem !important;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important;
}

.dark .invoice-container {
    background: rgb(31 41 55) !important; /* gray-800 */
}

/* Invoice header grid */
.invoice-header {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
    gap: 1.5rem !important;
    margin-bottom: 1.5rem !important;
    width: 100% !important;
}

/* Invoice meta information layout */
.invoice-meta {
    display: flex !important;
    justify-content: space-between !important;
    margin-bottom: 1.5rem !important;
    width: 100% !important;
    gap: 2rem !important;
}

.meta-section {
    flex: 1 !important;
    max-width: 48% !important;
    overflow: hidden !important;
}

.meta-section:first-child {
    text-align: left !important;
}

.meta-section:last-child {
    text-align: right !important;
}

.meta-title {
    font-weight: 600 !important;
    font-size: 0.875rem !important;
    color: rgb(55 65 81) !important; /* gray-700 */
    margin-bottom: 0.5rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.025em !important;
}

.dark .meta-title {
    color: rgb(209 213 219) !important; /* gray-300 */
}

.meta-section div {
    font-size: 0.75rem !important;
    color: rgb(17 24 39) !important; /* gray-900 */
    margin-bottom: 0.25rem !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

.dark .meta-section div {
    color: rgb(243 244 246) !important; /* gray-100 */
}

/* ==========================================
   INVOICE LINE ITEMS TABLE
   ========================================== */

/* Line items section */
.line-items-section {
    width: 100% !important;
    margin-bottom: 2rem !important;
    position: relative !important;
}

.line-items-header {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    margin-bottom: 1rem !important;
    width: 100% !important;
}

/* Invoice table wrapper */
.invoice-table-wrapper {
    width: 100% !important;
    overflow-x: auto !important;
    border: 1px solid rgb(209 213 219) !important; /* gray-300 */
    border-radius: 0.375rem !important;
}

.dark .invoice-table-wrapper {
    border-color: rgb(75 85 99) !important; /* gray-600 */
}

/* Invoice table */
.invoice-table {
    width: 100% !important;
    min-width: 100% !important;
    table-layout: fixed !important;
    border-collapse: collapse !important;
    border-spacing: 0 !important;
    margin: 0 !important;
}

.invoice-table th {
    padding: 0.5rem 0.375rem !important;
    border-bottom: 1px solid rgb(229 231 235) !important; /* gray-200 */
    border-right: 1px solid rgb(229 231 235) !important;
    background-color: rgb(249 250 251) !important; /* gray-50 */
    text-align: center !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    color: rgb(55 65 81) !important; /* gray-700 */
    text-transform: uppercase !important;
    letter-spacing: 0.025em !important;
}

.dark .invoice-table th {
    background-color: rgb(55 65 81) !important; /* gray-700 */
    border-color: rgb(75 85 99) !important; /* gray-600 */
    color: rgb(209 213 219) !important; /* gray-300 */
}

.invoice-table td {
    padding: 0.5rem 0.375rem !important;
    border-bottom: 1px solid rgb(229 231 235) !important; /* gray-200 */
    border-right: 1px solid rgb(229 231 235) !important;
    font-size: 0.75rem !important;
    vertical-align: middle !important;
}

.dark .invoice-table td {
    border-color: rgb(75 85 99) !important; /* gray-600 */
}

/* Column width specifications */
.invoice-table th:nth-child(1), .invoice-table td:nth-child(1) { width: 40px !important; } /* Sr. */
.invoice-table th:nth-child(2), .invoice-table td:nth-child(2) { width: 90px !important; } /* Type */
.invoice-table th:nth-child(3), .invoice-table td:nth-child(3) { width: auto !important; min-width: 200px !important; } /* Item */
.invoice-table th:nth-child(4), .invoice-table td:nth-child(4) { width: 60px !important; } /* Qty */
.invoice-table th:nth-child(5), .invoice-table td:nth-child(5) { width: 80px !important; } /* Price */
.invoice-table th:nth-child(6), .invoice-table td:nth-child(6) { width: 70px !important; } /* Disc % */
.invoice-table th:nth-child(7), .invoice-table td:nth-child(7) { width: 80px !important; } /* GST */
.invoice-table th:nth-child(8), .invoice-table td:nth-child(8) { width: 80px !important; } /* Total */
.invoice-table th:nth-child(9), .invoice-table td:nth-child(9) { width: 80px !important; } /* Action */

/* Line item row styling */
.line-item-row {
    width: 100% !important;
}

.line-item-row input,
.line-item-row select {
    width: 100% !important;
    box-sizing: border-box !important;
    padding: 0.25rem 0.5rem !important;
    font-size: 0.75rem !important;
    border: 1px solid rgb(209 213 219) !important; /* gray-300 */
    border-radius: 0.25rem !important;
}

.line-item-row.saved input,
.line-item-row.saved select {
    background-color: rgb(249 250 251) !important; /* gray-50 */
}

.dark .line-item-row.saved input,
.dark .line-item-row.saved select {
    background-color: rgb(55 65 81) !important; /* gray-700 */
}

/* Right-aligned columns */
.invoice-table .text-right,
.invoice-table .text-right input {
    text-align: right !important;
}

/* ==========================================
   INVOICE SEARCH AND AUTOCOMPLETE
   ========================================== */

/* Item search results */
.item-search-results {
    position: absolute !important;
    z-index: 50 !important;
    background-color: white !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
    border-radius: 0.375rem !important;
    max-width: 20rem !important;
    max-height: 10rem !important;
    overflow-y: auto !important;
    border: 1px solid rgb(209 213 219) !important; /* gray-300 */
}

.dark .item-search-results {
    background-color: rgb(55 65 81) !important; /* gray-700 */
    border-color: rgb(75 85 99) !important; /* gray-600 */
}

.item-search-results div {
    padding: 0.5rem 0.75rem !important;
    cursor: pointer !important;
    font-size: 0.75rem !important;
    border-bottom: 1px solid rgb(229 231 235) !important; /* gray-200 */
}

.dark .item-search-results div {
    border-color: rgb(75 85 99) !important; /* gray-600 */
}

.item-search-results div:hover {
    background-color: rgb(243 244 246) !important; /* gray-100 */
}

.dark .item-search-results div:hover {
    background-color: rgb(75 85 99) !important; /* gray-600 */
}

/* Patient search results - larger and positioned better */
.patient-search-results {
    position: absolute !important;
    z-index: 50 !important;
    width: auto !important;
    min-width: 18rem !important;
    max-width: 25rem !important;
    max-height: 18rem !important;
    overflow-y: auto !important;
    right: 0 !important;
    background-color: white !important;
    border: 1px solid rgb(209 213 219) !important; /* gray-300 */
    border-radius: 0.375rem !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
}

.dark .patient-search-results {
    background-color: rgb(55 65 81) !important; /* gray-700 */
    border-color: rgb(75 85 99) !important; /* gray-600 */
}

/* ==========================================
   INVOICE TOTALS SECTION
   ========================================== */

/* Total section layout */
.invoice-total-section {
    display: block !important;
    width: 100% !important;
    margin: 1.5rem 0 !important;
}

.amount-in-words {
    width: 100% !important;
    border: 1px solid rgb(209 213 219) !important; /* gray-300 */
    padding: 0.75rem !important;
    margin-bottom: 1rem !important;
    background-color: rgb(249 250 251) !important; /* gray-50 */
    border-radius: 0.375rem !important;
    font-size: 0.875rem !important;
    word-wrap: break-word !important;
    box-sizing: border-box !important;
}

.dark .amount-in-words {
    background-color: rgb(55 65 81) !important; /* gray-700 */
    border-color: rgb(75 85 99) !important; /* gray-600 */
    color: rgb(243 244 246) !important; /* gray-100 */
}

.invoice-totals {
    width: 100% !important;
    text-align: right !important;
}

.total-row {
    display: flex !important;
    justify-content: space-between !important;
    padding: 0.375rem 0 !important;
    font-size: 0.875rem !important;
}

.total-row.grand-total {
    font-weight: 700 !important;
    font-size: 1rem !important;
    border-top: 2px solid rgb(55 65 81) !important; /* gray-700 */
    padding-top: 0.5rem !important;
    margin-top: 0.5rem !important;
}

.dark .total-row.grand-total {
    border-color: rgb(209 213 219) !important; /* gray-300 */
}

/* ==========================================
   INVOICE SUMMARY CARD
   ========================================== */

.invoice-total-summary {
    background-color: rgb(249 250 251) !important; /* gray-50 */
    border-radius: 0.5rem !important;
    padding: 1rem !important;
    margin-top: 1rem !important;
    border: 1px solid rgb(229 231 235) !important; /* gray-200 */
    width: 100% !important;
    box-sizing: border-box !important;
}

.dark .invoice-total-summary {
    background-color: rgba(31, 41, 55, 0.5) !important;
    border-color: rgba(75, 85, 99, 0.3) !important;
}

/* ==========================================
   INVOICE PRINT STYLES
   ========================================== */

@media print {
    /* Page setup */
    @page {
        size: A4 portrait;
        margin: 15mm !important;
    }
    
    /* Print container */
    .print-container {
        width: 180mm !important;
        height: auto !important;
        padding: 0 !important;
        margin: 0 auto !important;
        font-size: 13px !important;
        line-height: 1.6 !important;
        page-break-inside: avoid !important;
    }
    
    /* Hide non-printable elements */
    .no-print, .btn-primary, .btn-secondary, .btn-outline, .btn-warning, .btn-danger {
        display: none !important;
        visibility: hidden !important;
    }
    
    /* Print-specific layouts */
    .print-container .invoice-meta {
        display: flex !important;
        justify-content: space-between !important;
        width: 180mm !important;
    }
    
    .print-container .invoice-table {
        width: 180mm !important;
        font-size: 12px !important;
    }
    
    .print-container .invoice-total-section {
        width: 180mm !important;
        display: block !important;
    }
    
    .print-container .amount-in-words {
        width: 180mm !important;
        margin-bottom: 10px !important;
        padding: 8px !important;
    }
    
    .print-container .invoice-totals {
        width: 180mm !important;
        text-align: right !important;
    }
    
    .print-container .total-row {
        display: flex !important;
        justify-content: space-between !important;
        width: 180mm !important;
        padding: 3px 0 !important;
    }
    
    /* Print table styling */
    .print-container table {
        width: 180mm !important;
        table-layout: fixed !important;
        border-collapse: collapse !important;
    }
    
    .print-container table th,
    .print-container table td {
        border: 1px solid #ddd !important;
        padding: 5px !important;
        font-size: 12px !important;
    }
    
    .print-container table th {
        background-color: #f2f2f2 !important;
        font-weight: bold !important;
        text-align: center !important;
    }
    
    /* Force print layout */
    .print-container > * {
        width: 180mm !important;
        max-width: 180mm !important;
        box-sizing: border-box !important;
    }
}

/* ==========================================
   MOBILE RESPONSIVE ADJUSTMENTS
   ========================================== */

@media (max-width: 768px) {
    .invoice-header {
        grid-template-columns: 1fr !important;
    }
    
    .invoice-meta {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .meta-section {
        max-width: 100% !important;
        text-align: left !important;
    }
    
    .meta-section:last-child {
        text-align: left !important;
    }
    
    .invoice-table-wrapper {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .patient-search-results {
        width: 100% !important;
        max-width: 100% !important;
        right: auto !important;
        left: 0 !important;
    }
    
    .total-row {
        font-size: 0.75rem !important;
    }
    
    .total-row.grand-total {
        font-size: 0.875rem !important;
    }
}

/* ==========================================
   CURRENCY AND NUMERIC FORMATTING
   ========================================== */

.currency-note {
    text-align: right !important;
    font-size: 0.75rem !important;
    margin-bottom: 0.375rem !important;
    font-style: italic !important;
    color: rgb(107 114 128) !important; /* gray-500 */
}

.dark .currency-note {
    color: rgb(156 163 175) !important; /* gray-400 */
}

/* Numeric value styling */
.numeric-value {
    font-family: 'Courier New', monospace !important;
    text-align: right !important;
}

/* Medicine fields specific styling */
.medicine-fields {
    margin-top: 0.5rem !important;
    font-size: 0.75rem !important;
    color: rgb(107 114 128) !important; /* gray-500 */
}

.dark .medicine-fields {
    color: rgb(156 163 175) !important; /* gray-400 */
}

/* ==========================================
   INVOICE STATUS INDICATORS
   ========================================== */

.invoice-card {
    transition: all 0.3s ease !important;
    border-radius: 0.375rem !important;
    margin-bottom: 0.75rem !important;
}

.invoice-card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
}

.active-invoice {
    border-left: 4px solid rgb(59 130 246) !important; /* blue-500 */
}

.related-invoice {
    border-left: 4px solid rgb(34 197 94) !important; /* green-500 */
}

.amount-pill {
    display: inline-block !important;
    padding: 0.25rem 0.75rem !important;
    border-radius: 9999px !important;
    font-weight: 600 !important;
    font-size: 0.875rem !important;
}